'use strict';!function(M){if("object"==typeof exports)module.exports=M();else if("function"==typeof define&&define.amd)define(M);else{var q;"undefined"!=typeof window?q=window:"undefined"!=typeof global?q=global:"undefined"!=typeof self&&(q=self);q.zuix=M()}}(function(){return function q(r,w,c){function l(a,d){if(!w[a]){if(!r[a]){var b="function"==typeof require&&require;if(!d&&b)return b(a,!0);if(e)return e(a,!0);throw Error("Cannot find module '"+a+"'");}b=w[a]={exports:{}};r[a][0].call(b.exports,
function(d){var b=r[a][1][d];return l(b?b:d)},b,b.exports,q,r,w,c)}return w[a].exports}for(var e="function"==typeof require&&require,b=0;b<c.length;b++)l(c[b]);return l}({1:[function(q,r,w){function c(a){m=a}function l(){null!==g&&(cancelAnimationFrame(g),g=null);d++;if(d<a.length&&!m.willBreak())return b(),!0;(d>=a.length||m.willBreak())&&e();return!1}function e(b){d=-1;a.length=0;a=[];m.status(null!=b?b:"done")}function b(){var b=a[d];if(null==b)return!1;var c=function(){null!==g&&(cancelAnimationFrame(g),
g=null);m.doWork(b.item,function(){g=requestAnimationFrame(l)})||l()};if(b.cancelable)if(m.willBreak())e("stopped");else if(null==g)g=requestAnimationFrame(c);else return!1;else c();return!0}c.prototype.isReady=function(){return 0==a.length||-1==d};c.prototype.getJobs=function(){return a};c.prototype.setJobs=function(b){0<a.length?(d=-1,a.length=0):(a=b.slice(),m.status("start",a),l())};c.prototype.append=function(b){this.isReady()?this.setJobs(b):Array.prototype.push.apply(a,b)};var a=[],d=-1,m=
null,g=null;r.exports=function(a){return new c(a)}},{}],2:[function(q,r,w){function c(d){e=window?window.console:{};b=window?window:{};this._timers={};this.args=function(a,b,d){a="%c "+b+" %c"+(new Date).toISOString()+" %c"+a;b=["background-color:rgba(200,200,200,0.2);color:#8a53ff;","background-color:rgba(200,200,200,0.2);color:#777777","background-color:rgba(200,200,200,0.2);color:#888888;"];for(var c=0;c<d.length;c++)if("string"==typeof d[c]&&0===d[c].indexOf("timer:")){var f=d[c].split(":");if(3===
f.length){var A=void 0;switch(f[2]){case "start":this._timers[f[1]]=(new Date).getTime();a+=" %cSTART "+f[1];b.push("background-color:rgba(200,200,200,0.2);color:#999900;");break;case "stop":A=(new Date).getTime()-this._timers[f[1]],a+=" %cSTOP "+f[1]+" "+A+" ms",200<A?b.push("background-color:rgba(200,200,200,0.2);color:#ff0000;"):100<A?b.push("background-color:rgba(200,200,200,0.2);color:#ff7700;"):b.push("background-color:rgba(200,200,200,0.2);color:#00aa00;")}}}a+=" \n%c ";b.push("background-color:transparent;color:inherit;");
for(c=b.length-1;0<=c;c--)Array.prototype.unshift.call(d,b[c]);Array.prototype.unshift.call(d,a);Array.prototype.push.call(d,"\n\n")};this.log=function(c,g){"function"===typeof a&&a.call(d,c,g);b.zuixNoConsoleOutput||(this.args(d,c,g),e.log.apply(e,g))}}var l="log info warn error debug trace dir group groupCollapsed groupEnd time timeEnd profile profileEnd dirxml assert count markTimeline timeStamp clear".split(" "),e=null,b=null,a=null;c.prototype.monitor=function(b){a=b};c.prototype.console=function(a){if(a)window.console=
e;else for(window.console={},a=0;a<l.length;a++)window.console[l[a]]||(window.console[l[a]]=function(){})};c.prototype.i=c.prototype.info=c.prototype.l=c.prototype.log=function(){this.log("INFO",arguments);return this};c.prototype.w=c.prototype.warn=function(){this.log("WARN",arguments);return this};c.prototype.e=c.prototype.error=function(){this.log("ERROR",arguments);return this};c.prototype.d=c.prototype.debug=function(){this.log("DEBUG",arguments);return this};c.prototype.t=c.prototype.trace=
function(){this.log("TRACE",arguments);return this};r.exports=function(a){return new c(a)}},{}],3:[function(q,r,w){function c(c){var b=this;b._worker=null;b._taskList=[];b._requests=[];null==c&&(c=function(){});b.taskQueue=function(a,d,m){b._taskList.push({tid:a,fn:d,status:0,priority:m,step:function(a){l.t(a,"load:step");c(b,"load:step",{task:a})},end:function(){this.status=2;l.t(this.tid,"load:next","timer:task:stop");c(b,"load:next",{task:this.tid});b._taskList.splice(this.index,1);b.taskCheck();
null!=this._callback&&this._callback.call(this)},callback:function(a){this._callback=a}});l.t(a,"task added",m,"priority");b._taskList.sort(function(a,b){return a.priority>b.priority?1:b.priority>a.priority?-1:0});b.taskCheck()};b.taskCheck=function(){for(var a=0;a<b._taskList.length;a++){if(0==b._taskList[a].status){b._taskList[a].status=1;l.t(b._taskList[a].tid,"load:begin","timer:task:start");c(b,"load:begin",{task:b._taskList[a].tid});b._taskList[a].index=a;b._taskList[a].fn.call(b._taskList[a]);
return}if(1==b._taskList[a].status||2==b._taskList[a].status)return}l.t("load:end");c(b,"load:end")}}var l=q("./Logger")("TaskQueue.js");c.prototype.queue=function(c,b,a){return this.taskQueue(c,b,a)};r.exports=c},{"./Logger":2}],4:[function(q,r,w){r.exports={isIE:function(){return 0<window.navigator.userAgent.indexOf("Trident")},isNoU:function(c){return"undefined"===typeof c||null===c},isFunction:function(c){return"function"===typeof c},objectEquals:function(c,l){if(null===c||void 0===c||null===
l||void 0===l)return c===l;if(c.constructor!==l.constructor)return!1;if(c instanceof Function||c instanceof RegExp)return c===l;if(c===l||c.valueOf()===l.valueOf())return!0;if(Array.isArray(c)&&c.length!==l.length||c instanceof Date||!(c instanceof Object)||!(l instanceof Object))return!1;var e=Object.keys(c);return Object.keys(l).every(function(b){return-1!==e.indexOf(b)})&&e.every(function(b){return util.objectEquals(c[b],l[b])})},propertyFromPath:function(c,l){if("string"===typeof l){l=l.replace(/\[(\w+)\]/g,
".$1");l=l.replace(/^\./,"");for(var e=l.split("."),b=c,a=0;a<e.length;++a){var d=e[a];if("undefined"!==typeof b[d])b=b[d];else return}return b}},cloneObject:function l(e){if(null===e||"object"!==typeof e)return e;var b=e;try{var b=e.constructor(),a;for(a in e)b[a]=l(e[a])}catch(d){}return b}}},{}],5:[function(q,r,w){function c(f){b(this,f.type,f)}function l(f,a,b){var d=!1;h.each(k,function(){if(this.element===f&&this.path===a&&this.handler===b)return m.w("Handler already registered",f,a,b),d=!0,
!1});d||(k.push({element:f,path:a,handler:b}),f.addEventListener(a,c,!1))}function e(f,a,b){var d=1,e=-1;h.each(k,function(c){this.element===f&&this.path===a&&this.handler===b&&(d--,e=c)});-1!==e&&k.splice(e,1);0===d&&f.removeEventListener(a,c)}function b(f,a,b){var c=h(f);h.each(k,function(){this.element===f&&this.path===a&&this.handler.call(c,b)})}function a(f){h.each(k,function(){this.element===f&&(m.t("Removing event handler",this.element,this.path,this.handler),e(this.element,this.path,this.handler))})}
function d(f){this._selection=[];"undefined"===typeof f&&(f=document.documentElement);if(f instanceof d)return f;if(f instanceof HTMLCollection||f instanceof NodeList){var a=this._selection=[];h.each(f,function(f,b){a.push(b)})}else if(Array.isArray(f))this._selection=f;else if(f===window||f instanceof HTMLElement||f instanceof Node)this._selection=[f];else if("string"===typeof f)this._selection=document.documentElement.querySelectorAll(f);else if(null!==f)throw m.e("ZxQuery cannot wrap object of this type.",
typeof f,f),Error("ZxQuery cannot wrap object of this type.");return this}var m=q("./Logger")("TaskQueue.js"),g=q("./Util.js"),k=[];d.prototype.length=function(){return this._selection.length};d.prototype.parent=function(f){return g.isNoU(f)?new d(this._selection[0].parentNode):new d(h.getClosest(this._selection[0],f))};d.prototype.children=function(f){return g.isNoU(f)?new d(this._selection[0].children):new d(this._selection[0].querySelectorAll(f))};d.prototype.reverse=function(){this._selection=
Array.prototype.slice.call(this._selection,0).reverse();return this};d.prototype.get=function(f){g.isNoU(f)&&(f=0);return this._selection[f]};d.prototype.eq=function(f){var a=this._selection,b=a[f];1<arguments.length&&(b=[],h.each(arguments,function(f,c){null!=a[c]&&b.push(a[c])}));return new d(b)};d.prototype.find=function(f){return new d(this._selection[0].querySelectorAll(f))};d.prototype.each=function(f){h.each(this._selection,f);return this};d.prototype.attr=function(f,a){var b=this;if("object"===
typeof f)h.each(f,function(f,a){b.each(function(b,c){c.setAttribute(f,a)})});else{if("undefined"==typeof a)return this._selection[0].getAttribute(f);null===a?this._selection[0].removeAttribute(f):this.each(function(b,c){this.get().setAttribute(f,a)})}return this};d.prototype.trigger=function(f,a){var b=void 0;window.CustomEvent?b=new CustomEvent(f,{detail:a}):(b=document.createEvent("CustomEvent"),b.initCustomEvent(f,!0,!0,a));this.each(function(f,a){a.dispatchEvent(b)});return this};d.prototype.one=
function(f,a){var b=!1;this.on(f,function(c,d){b||(b=!0,h(this).off(f,a),a.call(this,c,d))});return this};d.prototype.on=function(f,a){var b=f.match(/\S+/g)||[];this.each(function(f,c){h.each(b,function(f,b){l(c,b,a)})});return this};d.prototype.off=function(f,a){var b=f.match(/\S+/g)||[];this.each(function(f,c){h.each(b,function(f,b){e(c,b,a)})});return this};d.prototype.reset=function(){this.each(function(f,b){a(b)});return this};d.prototype.isEmpty=function(){return 0===this._selection[0].innerHTML.replace(/\s/g,
"").length};d.prototype.position=function(){return null!=this._selection[0]?h.getPosition(this._selection[0]):{x:-1,y:-1,visible:!1}};d.prototype.css=function(f,a){var b=this;if("object"===typeof f)h.each(f,function(f,a){b.each(function(b,c){c.style[f]=a})});else{if(g.isNoU(a))return this._selection[0].style[f];b.each(function(b,c){c.style[f]=a})}return this};d.prototype.addClass=function(f){var a=f.match(/\S+/g)||[];h.each(this._selection,function(b,c){c.classList?h.each(a,function(f,a){c.classList.add(a)}):
c.className+=" "+f});return this};d.prototype.hasClass=function(f){return h.hasClass(this._selection[0],f)};d.prototype.removeClass=function(f){var a=f.match(/\S+/g)||[];h.each(this._selection,function(b,c){c.classList?h.each(a,function(f,a){c.classList.remove(a)}):c.className=c.className.replace(new RegExp("(^|\\b)"+f.split(" ").join("|")+"(\\b|$)","gi")," ")});return this};d.prototype.prev=function(){return new d(this._selection[0].previousElementSibling)};d.prototype.next=function(){return new d(this._selection[0].nextElementSibling)};
d.prototype.html=function(f){if(g.isNoU(f))return this._selection[0].innerHTML;this.each(function(a,b){b.innerHTML=f});return this};d.prototype.checked=function(f){if(g.isNoU(f)){var a=this._selection[0].checked;return null!=a&&"false"!=a&&(a||"checked"==a)}this.each(function(a,b){b.checked=f});return this};d.prototype.value=function(a){if(g.isNoU(a))return this._selection[0].value;this.each(function(b,c){c.value=a});return this};d.prototype.append=function(a){"string"===typeof a?this._selection[0].innerHTML+=
a:this._selection[0].appendChild(a);return this};d.prototype.insert=function(a,b){var c=this.children().get(a);null!==c?this._selection[0].insertBefore(b,c):this._selection[0].appendChild(b);return this};d.prototype.prepend=function(a){"string"===typeof a?this._selection[0].innerHTML=a+this._selection[0].innerHTML:this._selection[0].insertBefore(a,this._selection[0].firstElementChild);return this};d.prototype.detach=function(){var a=this._selection[0],b=a.parentNode;null!=b&&(a.__zuix_oldParent=b,
a.__zuix_oldIndex=Array.prototype.indexOf.call(b.children,a),b.removeChild(a),m.t("Detached from parent",b,a));return this};d.prototype.attach=function(){var a=this._selection[0];null==a.parentNode&&null!=a.__zuix_oldParent&&(h(a.__zuix_oldParent).insert(a.__zuix_oldIndex,a),a.__zuix_oldParent=null,delete a.__zuix_oldParent,delete a.__zuix_oldIndex);return this};d.prototype.display=function(a){if(g.isNoU(a))return this._selection[0].style.display;h.each(this._selection,function(b,c){c.style.display=
a});return this};d.prototype.visibility=function(a){if(g.isNoU(a))return this._selection[0].style.visibility;h.each(this._selection,function(b,c){c.style.visibility=a});return this};d.prototype.show=function(a){return this.display(null==a?"":a)};d.prototype.hide=function(){return this.display("none")};var h=function(a){return new d(a)};h.find=function(a){return h().find(a)};h.each=function(a,b){var c=null==a?0:Object.keys(a).length;if(0<c){var d=0,e;for(e in a){var p=a[e];p instanceof Element&&(p=
h(p));if(!1===b.call(p,e,a[e]))break;d++;if(d>=c)break}}return this};h.ajax=function(a){var b=void 0,b=g.isNoU(a)||g.isNoU(a.url)?a:a.url,c=new XMLHttpRequest;c.open("GET",b);c.onload=function(){200===c.status?g.isFunction(a.success)&&a.success(c.responseText):g.isFunction(a.error)&&a.error(c);g.isFunction(a.then)&&a.then(c)};c.send();return this};h.hasClass=function(a,b){var c=b.match(/\S+/g)||[],d=!1;h.each(c,function(b,c){if(d=a.classList?a.classList.contains(c):(new RegExp("(^| )"+c+"( |$)","gi")).test(a.className))return!1});
return d};h.classExists=function(a){a=a.match(/\S+/g)||[];var b=!1;h.each(a,function(a,f){var c=document.styleSheets;if(null!=c)for(var d=0;d<c.length;d++)try{var e=c[d].rules||c[d].cssRules;if(null!=e)for(var g=0;g<e.length;g++)if(e[g].selectorText===f){b=!0;break}}catch(m){if("SecurityError"!==m.name)throw m;}});return b};h.wrapElement=function(a,b){var c=document.createElement(a);"string"===typeof b?c.innerHTML=b:c.appendChild(b);return c};h.wrapCss=function(a,b){var c=/((.*){([^{}]|((.*){([^}]+)[}]))*})/g,
d="",e=void 0;b=b.replace(/\/\*[\s\S]*?\*\/|([^:]|^)\/\/.*$/g,"");var g={isMediaQuery:void 0,classes:void 0};do{if((e=c.exec(b))&&1<e.length){var n=e[2];null!=n&&0<n.length?(g.classes=n.split(","),g.isMediaQuery=!1,h.each(g.classes,function(b){return function(c,e){"."===e.replace(" ","")?d+="\n"+a+" ":"@"===e.trim()[0]?(d+=e+" ",e.trim().toLowerCase().startsWith("@media")&&(b.isMediaQuery=!0)):d+="\n"+a+"\n"+e+" ";c<b.classes.length-1&&(d+=", ")}}(g)),g.isMediaQuery?(n=h.wrapCss(a,e[1].substring(e[2].length).replace(/^{([^\0]*?)}$/,
"$1")),d+="{\n  "+n+"\n}"):d+=e[1].substring(e[2].length)+"\n"):m.w("z$.wrapCss was unable to parse rule.",n,e)}g={isMediaQuery:g.isMediaQuery,classes:g.classes}}while(e);""!==d&&(b=d);return b};h.appendCss=function(a,b,c){var d=document.head||document.getElementsByTagName("head")[0],e=null;g.isNoU(b)?(b=document.getElementById(c),null!=b&&d.removeChild(b)):d.removeChild(b);"string"===typeof a?(e=document.createElement("style"),e.type="text/css",e.id=c,e.styleSheet?e.styleSheet.cssText=a:e.appendChild(document.createTextNode(a))):
a instanceof Element&&(e=a);g.isNoU(e)||d.appendChild(e);return e};h.replaceCssVars=function(a,b){for(var c=new RegExp(/\B\$var\[(.*[^\[\]])]/g),d="",e=0,g=0,n=void 0;n=c.exec(a);){var m=n[0];if(1<n.length){var k=n[1],h=b;if(0<k.indexOf(".")){for(var k=k.split("."),l=0;l<k.length-1&&(h=h[k[l]],"undefined"!==typeof h);l++);"undefined"!==typeof h&&(m=h[k[k.length-1]],e++)}else"undefined"!==typeof h[k]&&(m=h[k],e++)}d+=a.substr(g,n.index-g)+m;g=n.index+n[0].length}0<e&&(a=d+=a.substr(g));return a};h.replaceBraces=
function(a,b){for(var c=new RegExp(/[^{}]+(?=})/g),d="",e=0,k=0,h=void 0;h=c.exec(a);)if("string"===typeof h[0]&&(0===h[0].trim().length||0<=h[0].indexOf("\n")))h=a.substr(k,h.index-k)+h[0]+"}",d+=h,k+=h.length;else{var m="{"+h[0]+"}";if("function"===typeof b){var l=b(h[0]);g.isNoU(l)||(m=l,e++)}d+=a.substr(k,h.index-k-1)+m;k=h.index+h[0].length+1}return 0<e?d+=a.substr(k):null};h.getClosest=function(a,b){for(;a&&a!==document;a=a.parentNode)if(a.matches(b))return a;return null};h.getPosition=function(a){for(var b=
h.isInView(a),c=0,d=0;a;){if("body"===a.tagName.toLowerCase())var e=a.scrollTop||document.documentElement.scrollTop,c=c+(a.offsetLeft-(a.scrollLeft||document.documentElement.scrollLeft)+a.clientLeft),d=d+(a.offsetTop-e+a.clientTop);else c+=a.offsetLeft-a.scrollLeft+a.clientLeft,d+=a.offsetTop-a.scrollTop+a.clientTop;a=a.offsetParent}return{x:c,y:d,visible:b}};h.isInView=function(a,b){if(null===a.offsetParent)return!1;var c=a.getBoundingClientRect(),d=window.innerWidth||document.documentElement.clientWidth,
e=window.innerHeight||document.documentElement.clientHeight,g=0,h=0;isNaN(b)||(g=d*b-d,h=e*b-e);return c.bottom>-h&&c.right>-g&&c.left<d+g&&c.top<e+h};h.ZxQuery=d;Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(a){a=(this.document||this.ownerDocument).querySelectorAll(a);for(var b=a.length;0<=--b&&
a.item(b)!==this;);return-1<b});(function(){function a(b,c){c=c||{bubbles:!1,cancelable:!1,detail:void 0};var d=document.createEvent("CustomEvent");d.initCustomEvent(b,c.bubbles,c.cancelable,c.detail);return d}if("function"===typeof window.CustomEvent)return!1;a.prototype=window.Event.prototype;window.CustomEvent=a})();String.prototype.hashCode=function(){var a=0;if(0===this.length)return a;for(var b=0;b<this.length;b++)var c=this.charCodeAt(b),a=(a<<5)-a+c,a=a|0;return a};String.prototype.startsWith||
(String.prototype.startsWith=function(a,b){return this.substr(!b||0>b?0:+b,a.length)===a});r.exports=h},{"./Logger":2,"./Util.js":4}],6:[function(q,r,w){q=q("./zuix/Zuix.js");"object"===typeof r&&r.exports?r.exports=q.call(this):this.zuix=q.call(this)},{"./zuix/Zuix.js":11}],7:[function(q,r,w){r.exports=function(c){return null}},{}],8:[function(q,r,w){function c(a,b){this._options=null;this.contextId=null==a||null==a.contextId?null:a.contextId;this.componentId=null;this.trigger=function(a,c,e){"function"===
typeof b&&b(a,c,e)};this.behavior=this._controller=this._style=this._css=this._view=this._model=this._container=null;this._eventMap=[];this._behaviorMap=[];this._c=null;this.options(a);return this}var l=q("../helpers/Logger")("ComponentContext.js"),e=q("../helpers/ZxQuery"),b=q("../helpers/Util");c.prototype.container=function(a){if(null==a)return this._container;a instanceof e.ZxQuery&&(a=a.get());this._container=a;return this};c.prototype.view=function(a){if("undefined"===typeof a)return this._view;
a instanceof e.ZxQuery&&(a=a.get());l.t(this.componentId,"view:attach","timer:view:start");"string"===typeof a?(a={content:a},this.trigger(this,"html:parse",a),a=a.content,null!=this._container?(this._view=this._container,this._view.innerHTML+=a):(a=e.wrapElement("div",a),null!=this._view?this._view.innerHTML=a.innerHTML:this._view=a),e(this._view).find("script").each(function(a,b){"true"!==this.attr("zuix-loaded")&&(this.attr("zuix-loaded","true"),eval.call(window,b.innerHTML))}),this.trigger(this,
"view:process",e(this._view))):(a instanceof e.ZxQuery&&(a=a.get()),null!=this._container?(this._view=e.wrapElement("div",a.outerHTML).firstElementChild,this._view.removeAttribute("data-ui-view"),this._container.appendChild(this._view),this._view=this._container):this._view=a);a=e(this._view);!1===this._options.css?a.addClass("zuix-css-ignore"):a.removeClass("zuix-css-ignore");this.modelToView();l.t(this.componentId,"view:attach","timer:view:stop");return this};c.prototype.style=function(a){if("undefined"===
typeof a)return this._style;l.t(this.componentId,"view:style","timer:view:start");null==a||a instanceof Element?(this._css=a instanceof Element?a.innerText:a,this._style=e.appendCss(a,this._style,this.componentId)):"string"===typeof a&&(this._css=a,a=e.wrapCss('[data-ui-component="'+this.componentId+'"]:not(.zuix-css-ignore)',a),a={content:a},this.trigger(this,"css:parse",a),a=a.content,this._style=e.appendCss(a,this._style,this.componentId));l.t(this.componentId,"view:style","timer:view:stop");return this};
c.prototype.model=function(a){if("undefined"===typeof a)return this._model;this._model=a;this.modelToView();null!=this._c&&b.isFunction(this._c.update)&&this._c.update.call(this._c);return this};c.prototype.controller=function(a){if("undefined"===typeof a)return this._controller;this._controller=a;return this};c.prototype.options=function(a){if(null==a)return this._options;var b=this._options=this._options||{};e.each(a,function(a,c){b[a]=c});null!=b.componentId&&(this.componentId=b.componentId);this.container(b.container);
this.view(b.view);"undefined"!==typeof b.css&&this.style(b.css);this.controller(b.controller);this.model(b.model);return this};c.prototype.on=function(a,b){this._c.on(a,b);return this};c.prototype.loadCss=function(a,c){var m=this;b.isNoU(a)&&(a={});b.isNoU(a.caching)||(c=a.caching);var g=m.componentId+".css";b.isNoU(a.path)||(g=a.path);c||(g+="?"+(new Date).getTime());e.ajax({url:g,success:function(c){m.style(c);b.isFunction(a.success)&&a.success.call(m,c)},error:function(c){l.e(c,m);b.isFunction(a.error)&&
a.error.call(m,c)},then:function(){b.isFunction(a.then)&&a.then.call(m)}});return this};c.prototype.loadHtml=function(a,c){var m=this,g=m.componentId;b.isNoU(a)&&(a={});b.isNoU(a.caching)||(c=a.caching);b.isNoU(a.path)||(g=a.path);var k=e().find('[data-ui-view="'+g+'"]:not([data-ui-component*=""])');0<k.length()?(g=k.get(0),m.view()===g||null!=m.container()&&m.container().contains(g)?m.view(g):m.view(g.outerHTML),g=m.view().innerHTML,b.isFunction(a.success)&&a.success.call(m,g),b.isFunction(a.then)&&
a.then.call(m)):(k=b.isNoU(a.cext)?".html":a.cext,g==m.componentId&&(g+=k+(c?"":"?"+(new Date).getTime())),e.ajax({url:g,success:function(c){m.view(c);b.isFunction(a.success)&&a.success.call(m,c)},error:function(c){l.e(c,m);b.isFunction(a.error)&&a.error.call(m,c)},then:function(){b.isFunction(a.then)&&a.then.call(m)}}));return this};c.prototype.viewToModel=function(){l.t(this.componentId,"view:model","timer:vm:start");var a=this;this._model={};e(this._view).find("[data-ui-field]").each(function(c,
e){if(0<this.parent("pre,code").length())return!0;var g=this.attr("data-ui-field"),k=!b.isNoU(e.innerHTML)&&b.isIE()?e.cloneNode(!0):e;if(0<g.indexOf(".")){for(var g=g.split("."),h=a._model,f=0;f<g.length-1;f++)"undefined"===typeof h[g[f]]&&(h[g[f]]={}),h=h[g[f]];h[g[g.length-1]]=k}else a._model[g]=k});l.t(this.componentId,"view:model","timer:vm:stop");return this};c.prototype.modelToView=function(){l.t(this.componentId,"model:view","timer:mv:start");if(null!=this._view&&null!=this._model){var a=
this;e(this._view).find("[data-ui-field]").each(function(c,m){if(0<this.parent("pre,code").length())return!0;var g=this.attr("data-bind-to");null==g&&(g=this.attr("data-ui-field"));if("function"===typeof a._model)a._model.call(e(a._view),this,g);else{var k=b.propertyFromPath(a._model,g);if("function"===typeof k)k.call(e(a._view),this,g);else if(null!=k)switch(m.tagName.toLowerCase()){case "img":m.src=b.isNoU(k.src)?b.isNoU(k.innerHTML)?k:k.innerHTML:k.src;k.alt&&(m.alt=k.alt);break;case "a":m.href=
b.isNoU(k.href)?b.isNoU(k.innerHTML)?k:k.innerHTML:k.getAttribute("href");k.title&&(m.title=k.title);b.isNoU(k.href)||b.isNoU(k.innerHTML)||""===k.innerHTML.trim()||(m.innerHTML=k.innerHTML);break;case "input":m.value=b.isNoU(k.value)?b.isNoU(k.innerHTML)?k:k.innerHTML:k.value;break;default:m.innerHTML=b.isNoU(k.innerHTML)?k:k.innerHTML}}})}l.t(this.componentId,"model:view","timer:mv:stop");return this};r.exports=c},{"../helpers/Logger":2,"../helpers/Util":4,"../helpers/ZxQuery":5}],9:[function(q,
r,w){function c(){}function l(a,b){null!=a&&(D=!a);null!=b&&(G=b);return!z&&!D}function e(a){null==a&&(a=document);t.indexOf(a)||t.push(a)}function b(a){for(var b=0;b<x.length;b++){var c=x[b];if(c.element===a)return c.waiting}return null}function a(a){null==a&&0<t.length&&(a=t.unshift());a instanceof n.ZxQuery&&(a=a.get());var c=b(a),c=n(a).find("[data-ui-load]:not([data-ui-loaded=true]),[data-ui-include]:not([data-ui-loaded=true])"),c=Array.prototype.slice.call(c._selection);x.push({element:a,waiting:c});
a=[];for(var d=0;d<c.length;d++){var e=parseInt(c[d].getAttribute("data-ui-priority"));isNaN(e)&&(e=0);var v=new y;v.element=c[d];v.priority=e;a.push(v)}for(d=c=0;d<a.length;d++){e=!1;for(v=0;v<u.length;v++)if(a[d].element===u[v].element){e=!0;break}e||(e=a[d].element,v=e.getAttribute("data-ui-options"),k(e,v),u.push(a[d]),c++)}L.t("componentize:count",u.length,c);(0===c||0===t.length&&0===u.length)&&B.trigger(this,"componentize:end")}function d(){u.sort(function(a,b){return a.priority-b.priority});
for(var a=null,b=0<u.length?u.shift():null;null!=b&&null!=b.element;){var c=K(b.element);l()&&c?(b.lazy=!0,b.visible=n.isInView(b.element,G)):(b.lazy=!1,b.visible=!0);if(null!=b&&null!=b.element&&b.visible){a={item:b,cancelable:b.lazy};break}if(0<u.length)b=u.shift();else break}return a}function m(b){a(b);b=d();null!=b&&H.append([b])}function g(a){var b=n(a);if("true"===b.attr("data-ui-loaded")||0<b.parent("pre,code").length())return!1;b.attr("data-ui-loaded","true");var c=b.attr("data-ui-options");
p.isNoU(c)?c={}:(c=p.propertyFromPath(window,c),c=p.cloneObject(c)||{});var d=b.attr("data-ui-context");if(!p.isNoU(d)){var v=B.context(d);null!==v&&(c=v.options());c.contextId=d}p.isNoU(c.view)&&!b.isEmpty()?(c.view=a,c.viewDeferred=!0):p.isNoU(c.view)&&p.isNoU(c.container)&&b.isEmpty()&&(c.container=a);d=b.attr("data-ui-load");p.isNoU(d)&&(d=b.attr("data-ui-include"),b.attr("data-ui-component",d),p.isNoU(c.controller)&&(c.controller=function(){}));v=b.attr("data-bind-model");!p.isNoU(v)&&0<v.length&&
(c.model=p.propertyFromPath(window,v));b=b.attr("data-ui-priority");p.isNoU(b)||(c.priority=parseInt(b));n(a).one("component:ready",function(){e(a);m(a)});B.load(d,c);return!0}function k(a,b){null==a||p.isNoU(b)||("string"===typeof b&&(b=p.propertyFromPath(window,b)),p.isNoU(b.lazyLoad)||a.setAttribute("data-ui-lazyload",b.lazyLoad.toString().toLowerCase()),p.isNoU(b.contextId)||a.setAttribute("data-ui-context",b.contextId.toString().toLowerCase()),p.isNoU(b.componentId)||a.setAttribute("data-ui-load",
b.componentId.toString().toLowerCase()))}function h(a){for(var b=0;b<F.length;b++){var c=F[b];if(c.element===a)return c}return null}function f(a){a={element:a};F.push(a);return a}function A(a){for(var b=0;b<J.length;b++){var c=J[b];if(c.element===a)return c}return null}function I(a){a={element:a};J.push(a);return a}function K(a){if("false"===a.getAttribute("data-ui-lazyload"))return!1;var b=h(a);if(null==b){var c=n.getClosest(a.parentNode,"[data-ui-lazyload=scroll],[data-ui-lazyload=true]");if(null!=
c)return b=f(a),a=A(c),null==a&&(a=I(c),"scroll"===c.getAttribute("data-ui-lazyload")&&function(a,b){var c=(new Date).getTime();n(b).on("scroll",function(){var a=(new Date).getTime();100<a-c&&(c=a,m(b))})}(this,c)),!0;if("true"===a.getAttribute("data-ui-lazyload"))return b=f(a),!0}else return!0;return!1}c.prototype.componentize=function(a,c){B.trigger(this,"componentize:begin");if(null!=c){var d=b(a);null==d?x.push({element:a,waiting:[c]}):d.push(c)}else e(a);m(a);return this};c.prototype.applyOptions=
function(a,b){k(a,b);return this};c.prototype.willLoadMore=function(){return 0<u.length||0<t.length};c.prototype.lazyLoad=function(a,b){return l(a,b)};c.prototype.dequeue=function(a){for(var b=0;b<u.length;b++)if(u[b].element===a){u.splice(b,1);break}};c.prototype.setHost=function(a){B=a;return this};r.exports=function(){return new c};var L=q("../helpers/Logger")("ComponentContext.js"),p=q("../helpers/Util"),n=q("../helpers/ZxQuery"),t=[],u=[],F=[],J=[],y=function(){return{element:null,priority:0,
visible:!0,lazy:!1}},H=q("./../helpers/AsynChain")({doWork:function(a,b){n(a.element).one("component:ready",function(){b()});return g(a.element)},willBreak:function(){return!1},status:function(a){switch(a){case "done":m()}}}),D=!1,G=1,B=null,z=!1;navigator&&navigator.userAgent&&(z=(new RegExp(/bot|googlebot|crawler|spider|robot|crawling/i)).test(navigator.userAgent));z&&L.d(navigator.userAgent,"is a bot, ignoring `lazy-loading` option.");var x=[]},{"../helpers/Logger":2,"../helpers/Util":4,"../helpers/ZxQuery":5,
"./../helpers/AsynChain":1}],10:[function(q,r,w){function c(c){var b=this;this._view=null;this.context=c;this._fieldCache=[];this.destroy=this.update=this.create=this.init=null;this._childNodes=[];this.saveView=function(){this.restoreView();this.view().children().each(function(a,c){b._childNodes.push(c)})};this.restoreView=function(){0<this._childNodes.length&&(b.view().html(""),l.each(b._childNodes,function(a,c){b.view().append(c)}),this._childNodes.length=0)};this.on=function(a,b){this.addEvent(a,
b);return this};this.mapEvent=function(a,b,c,d){null!=b&&(b.off(c,this.eventRouter),a[c]=d,b.on(c,this.eventRouter))};this.eventRouter=function(a){"function"===typeof c._behaviorMap[a.type]&&c._behaviorMap[a.type].call(b.view(),a,a.detail);"function"===typeof c._eventMap[a.type]&&c._eventMap[a.type].call(b.view(),a,a.detail)};var a=c.options(),d=null;if(null!=a.on)for(var m in a.on)d=a.on[m],b.addEvent(m,d);if(null!=a.behavior)for(var g in a.behavior)d=a.behavior[g],b.addBehavior(g,d);c.controller().call(this,
this);return this}var l=q("../helpers/ZxQuery");c.prototype.addEvent=function(c,b){this.mapEvent(this.context._eventMap,this.view(),c,b);return this};c.prototype.addBehavior=function(c,b){this.mapEvent(this.context._behaviorMap,this.view(),c,b);return this};c.prototype.field=function(c){return null};c.prototype.clearCache=function(){this._fieldCache.length=0};c.prototype.view=function(c){if(null!=this.context.view()||this._view!==this.context.view())this.clearCache(),this._view=l(this.context.view());
if(null!=c)return this._view.find(c);if(null!==this._view)return this._view;throw Error("Not attached to a view yet.");};c.prototype.model=function(c){if(null==c)return this.context.model();this.context.model(c);return this};c.prototype.options=function(){return this.context.options()};c.prototype.trigger=function(c,b,a){null==this.context._eventMap[c]&&!0!==a&&this.addEvent(c,null);!0===a?(a=this.context.container(),null==a&&(a=this.context.view()),null!=a&&l(a).trigger(c,b),this.context.trigger(this.context,
c,b)):this.view().trigger(c,b);return this};c.prototype.expose=function(c,b){if("object"===typeof c){var a=this;l.each(c,function(b,c){a.context[b]=c})}else this.context[c]=b;return this};c.prototype.loadCss=function(c){this.context.loadCss(c);return this};c.prototype.loadHtml=function(c){this.saveView();this.context.loadHtml(c);return this};c.prototype.log={};c.prototype.for=function(c){return this};r.exports=c},{"../helpers/ZxQuery":5}],11:[function(q,r,w){function c(){y.setHost(this);this._fieldCache=
[];return this}function l(a){"function"!==typeof a["for"]&&(a["for"]=function(b){return G[b]=a});return a}function e(a,b,c){n.isNoU(c)&&(c=this);null==c._fieldCache&&(c._fieldCache={});var d=null;if("undefined"===typeof c._fieldCache[a]){if(d=t(b).find('[data-ui-field="'+a+'"]'),null!=d&&0<d.length()&&(c._fieldCache[a]=d,1===d.length()&&n.isNoU(d.field))){var e=this;d.field=function(a){return e.field(a,d,d)}}}else d=c._fieldCache[a];return d}function b(a,b){var c=h(a.componentId);null!==c&&null==
b.controller&&null==a.controller()&&(a.controller(c.controller),p.t(a.componentId+":js","component:cached:js"));if(n.isNoU(b.view)){if(null!==c&&null!=c.view&&(a.view(c.view),p.t(a.componentId+":html","component:cached:html"),null!=c.view&&n.isNoU(b.css)&&(b.css=!1,c.css_applied||(c.css_applied=!0,a.style(c.css),p.t(a.componentId+":css","component:cached:css")))),n.isNoU(a.view()))return N("resource-loader").queue(a.componentId+":html",function(){x[a.componentId]=this;a.loadHtml({cext:b.cext,caching:E,
success:function(d){null==c&&(c=A(a));c.view=d;delete c.controller;!1!==b.css?(x[a.componentId].step(a.componentId+":css"),a.loadCss({caching:E,success:function(a){c.css=a},error:function(b){p.e(b,a)},then:function(){f(a,x[a.componentId])}})):f(a,x[a.componentId])},error:function(c){p.e(c,a);n.isFunction(b.error)&&a.error.call(a,c)}})},b.priority),a}else a.view(b.view);null==a.controller()?N("resource-loader").queue(a.componentId+":js",function(){x[a.componentId]=this;f(a,x[a.componentId])},H.length):
f(a);return a}function a(a){if(a instanceof Element){var b=a;a=zuix.context(b);y.dequeue(b)}n.isNoU(a)||(n.isNoU(a._c)||(n.isNoU(a._c.view())||(a._c.view().attr("data-ui-component",null),a._c.view().reset(),n.isNoU(a._c._fieldCache)||t.each(a._c._fieldCache,function(a,b){b.reset()}),a._c.view().detach()),n.isFunction(a._c.destroy)&&a._c.destroy()),a=a.container(),null!=a&&null!=a.parentNode&&a.parentNode.removeChild(a))}function d(a){a=new F(a,g);H.push(a);return a}function m(a,b){var c=null;if(a instanceof
t.ZxQuery)a=a.get();else if("string"===typeof a){var d=t.find('[data-ui-context="'+a+'"]');0<d.length()&&(a=d.get())}t.each(H,function(b,d){if(a instanceof Element&&(d.view()===a||d.container()===a)||n.objectEquals(d.contextId,a))return c=d,!1});if("function"===typeof b&&(a instanceof Element||a instanceof t.ZxQuery))if(null==c)t(a).one("component:ready",function(){c=zuix.context(this);b.call(c,c)});else b.call(c,c);return c}function g(a,b,c){n.isFunction(D[b])&&D[b].call(a,c)}function k(a){null!=
a&&(E=a);return E}function h(a){var b=null;t.each(C,function(c,d){if(n.objectEquals(d.componentId,a))return b=d,!1});return b}function f(a,b){if("undefined"===typeof a.options().controller&&null===a.controller())if(p.d(a.componentId,"controller:load"),n.isNoU(b)||b.step(a.componentId+":js"),n.isFunction(G[a.componentId]))a.controller(G[a.componentId]),I(a,b);else{var c=function(b){t.ajax({url:a.componentId+".js"+(E?"":"?"+(new Date).getTime()),success:function(b){try{var c=b.indexOf("function"),d=
b.indexOf(".load");1<d&&d<c&&(b=b.substring(0,d-4));var e=b.indexOf(".controller");1<e&&e<c&&(b=b.substring(e+11));var f=b.indexOf("//<--controller");0<f&&(b=b.substring(0,f));b+='\n//# sourceURL="'+a.componentId+'.js"\n';a.controller(L(b))}catch(g){p.e(Error(),g,b,a),n.isFunction(a.error)&&a.error.call(a,g)}},error:function(b){p.e(b,Error(),a);n.isFunction(a.error)&&a.error.call(a,b)},then:function(){I(a,b)}})};n.isNoU(b)?N("resource-loader").queue(a.componentId+":js",function(){c(x[a.componentId]=
this)},a.options().priority):c(b)}else I(a,b)}function A(a){var b=a.view().innerHTML,b=t.wrapElement("div",b),b={componentId:a.componentId,view:b.innerHTML,css:a._css,controller:a.controller()};C.push(b);p.t(a.componentId,"bundle:added");return b}function I(a,b){x[a.componentId]=null;if(n.isNoU(a.view()))p.e(a.componentId,"component:view:undefined");else{var c=h(a.componentId);a.options().viewDeferred?p.w(a.componentId,"component:deferred:load"):null===c?c=A(a):null==c.controller&&(c.controller=a.controller());
null!=b&&b.callback(function(){p.d(a.componentId,"controller:create:deferred");K(a._c)});p.d(a.componentId,"component:initializing");if(n.isFunction(a.controller())){var d=a._c=new J(a);d.log=q("../helpers/Logger")(a.contextId);"function"===typeof d.init&&d.init();if(!n.isNoU(d.view()))if(null==d.view().attr("data-ui-component")&&d.view().attr("data-ui-component",a.componentId),n.isNoU(a.model())&&!n.isNoU(a.view())&&a.viewToModel(),d.trigger("view:apply"),a.options().viewDeferred){a.options().viewDeferred=
!1;d.saveView();null===c&&(c={componentId:a.componentId,controller:a.controller()},C.push(c),p.t(a.componentId,"bundle:added"),p.d(a.componentId,"component:deferred:load"));var e=-1;!1!==a.options().css&&(null==c.css?(-1===e&&(e=0),e++,a.loadCss({caching:E,success:function(b){null==c.css&&(c.css=b);p.d(a.componentId,"component:deferred:css",e)},then:function(){0===--e&&null!=b&&b.end()}})):a.style(c.css));!1!==a.options().html&&(null==c.view?(-1===e&&(e=0),e++,a.loadHtml({cext:a.options().cext,caching:E,
success:function(b){null==c.view&&(c.view=b);p.d(a.componentId,"component:deferred:html",e)},error:function(b){p.e(b,a);n.isFunction(a.options().error)&&a.options().error.call(a,b)},then:function(){0===--e&&null!=b&&b.end()}})):a.view(c.view));-1===e&&null!=b&&b.end()}else null!=b&&b.end();null==b&&(p.d(a.componentId,"controller:create"),K(d))}else p.w(a.componentId,"component:controller:undefined")}}function K(a){p.t(a.context.componentId,"controller:init","timer:init:start");a.field=function(b){b=
e(b,a.view(),a);b.on=function(b,c,d,e){if("string"===typeof c){var f=c;c=function(){a.trigger(f,d,e)}}return t.ZxQuery.prototype.on.call(this,b,c)};return b};n.isFunction(a.create)&&a.create();a.trigger("view:create");n.isFunction(a.context.ready)&&a.context.ready.call(a.context,a.context);a.trigger("component:ready",a.view(),!0);p.t(a.context.componentId,"controller:init","timer:init:stop");p.i(a.context.componentId,"component:loaded",a.context.contextId);if(null!=z[a.context.componentId]){var c=
z[a.context.componentId];z[a.context.componentId]=null;for(var d=void 0;null!=c&&null!=(d=c.shift());)b(d.c,d.o)}}function L(a){var b=function(a){};if("string"===typeof a)try{b=eval.call(this,a)}catch(c){p.e(this,c,a)}return b}var p=q("../helpers/Logger")("Zuix.js"),n=q("../helpers/Util"),t=q("../helpers/ZxQuery"),u=q("../helpers/TaskQueue"),F=q("./ComponentContext"),J=q("./ContextController"),y=q("./Componentizer")();q("./ComponentCache");var H=[],D=[],G={},B=[],z={},x=[],N=function(a){n.isNoU(B[a])&&
(B[a]=new u(function(a,b,c){g(a,b,c)}));return B[a]},C=[],O=0,E=!0;c.prototype.field=function(a,b){return e.call(this,a,b)};c.prototype.load=function(a,c){var e;e=c;var f=null;n.isNoU(e)?(e={},f=new F(e,g)):(e.componentId=a,n.isNoU(e.contextId)?(!1===e&&(e={}),e.contextId="zuix-ctx-"+ ++O,f=d(e)):(f=m(e.contextId),null!==f?f.options(e):f=d(e)));f.componentId!=a&&(f.componentId=a);n.isFunction(e.ready)&&(f.ready=e.ready);n.isFunction(e.error)&&(f.error=e.error);null==x[a]?(x[a]=!0,e=b(f,e)):(null==
z[a]&&(z[a]=[]),z[a].push({c:f,o:e}),e=f);return e};c.prototype.unload=function(b){a(b);return this};c.prototype.controller=function(a){return l.call(this,a)};c.prototype.context=function(a,b){return m.call(this,a,b)};c.prototype.createComponent=function(a,b){null==b&&(b={});n.isNoU(b.contextId)&&(b.contextId="zuix-ctx-"+ ++O);if(null!=m(b.contextId))throw Error("Context arelady exists.");b.container=document.createElement("div");b.componentId=a;y.applyOptions(b.container,b);return d(b)};c.prototype.trigger=
function(a,b,c){g(a,b,c);return this};c.prototype.hook=function(a,b){n.isNoU(b)?delete D[a]:D[a]=b;return this};c.prototype.using=function(a,b,c){a=a.toLowerCase();var d=a+"-"+b.hashCode();if("component"===a)a=m(d),null==a?zuix.load(b,{contextId:d,view:"",priority:-10,ready:function(a){"function"===typeof c&&c(b,a)},error:function(){c(b,null)}}):"function"===typeof c&&c(b,a);else{var e="style"===a;if(0===t.find(a+'[id="'+d+'"]').length()){var f=document.head||document.getElementsByTagName("head")[0],
g=document.createElement(a);g.type=e?"text/css":"text/javascript";g.id=d;f.appendChild(g);var k=function(a){e?g.styleSheet?g.styleSheet.cssText=a:g.appendChild(document.createTextNode(a)):g.innerText?g.innerText=a:g.appendChild(document.createTextNode(a));c&&c(b,d)},l="_res/"+a+"/"+d;a=h(l);null!=a?k(e?a.css:a.controller):t.ajax({url:b,success:function(a){C.push({componentId:l,view:null,css:e?a:null,controller:e?null:a,using:b});k(a)},error:function(){f.removeChild(g);c&&c(b)}})}else console.log("Resource already added "+
d+"("+b+")"),c&&c(b,d)}};c.prototype.lazyLoad=function(a,b){if(null!=a)y.lazyLoad(a,b);else return y.lazyLoad();return this};c.prototype.httpCaching=function(a){if(null!=a)k(a);else return k();return this};c.prototype.componentize=function(a){y.componentize(a);return this};c.prototype.bundle=function(a,b){if(n.isNoU(a))return C;if(a&&"boolean"===typeof a){p.t("bundle:start");var c=y.lazyLoad();y.lazyLoad(!1);y.componentize();if("function"===typeof b){var d=function(a){setTimeout(function(){y.willLoadMore()?
(p.t("bundle:wait"),a(a)):(p.t("bundle:end"),y.lazyLoad(c),b())},1E3)};d(d)}}else{for(d=0;d<a.length;d++)a[d].css_applied&&delete a[d].css_applied;C=a}return this};c.prototype.$=t;c.prototype.TaskQueue=u;c.prototype.ZxQuery=t.ZxQuery;c.prototype.dumpCache=function(){return C};c.prototype.dumpContexts=function(){return H};r.exports=function(a){var b=new c;"loading"!=document.readyState?b.componentize():document.addEventListener("DOMContentLoaded",function(){b.componentize()});p.monitor(function(a,
c){n.isFunction(b.monitor)&&b.monitor(a,Array.prototype.slice.call(c))});return b}},{"../helpers/Logger":2,"../helpers/TaskQueue":3,"../helpers/Util":4,"../helpers/ZxQuery":5,"./ComponentCache":7,"./ComponentContext":8,"./Componentizer":9,"./ContextController":10}]},{},[6])(6)});
//# sourceMappingURL=zuix.min.js.map
